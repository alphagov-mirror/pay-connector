---
applications:
  - name: card-connector
    buildpacks:
        - java_buildpack
    path: target/pay-connector-0.1-SNAPSHOT-allinone.jar
    memory: 1G
    disk_quota: 1G
    env:
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 11.+ } }'
      JBP_CONFIG_JAVA_MAIN: '{ arguments: "server /home/vcap/app/config/config.yaml" }'
      JAVA_OPTS: -Xms512m -Xmx1G
      HTTP_PROXY_HOST: 'localhost'
      HTTP_PROXY_PORT: '9999'
      HTTP_PROXY_ENABLED: false
      RUN_APP: 'true'
      DISABLE_INTERNAL_HTTPS: true
      health-check-type: http
      health-check-http-endpoint: '/healthcheck'
      health-check-invocation-timeout: 5
      ADMIN_PORT: '9301'
      DB_HOST: postgres-((space)).apps.internal
      DB_SSL_OPTION: ssl=none
      DB_USER: connector
      DB_PASSWORD: mysecretpassword
      FRONTEND_URL: https://pay-card-frontend-((space)).london.cloudapps.digital
      SECURE_WORLDPAY_NOTIFICATION_ENABLED: 'false'
      SECURE_WORLDPAY_NOTIFICATION_DOMAIN: london.cloudapps.digital
      GDS_CONNECTOR_WORLDPAY_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/worldpay
      GDS_CONNECTOR_WORLDPAY_TEST_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/worldpay
      GDS_CONNECTOR_WORLDPAY_LIVE_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/worldpay
      APPLE_PAY_PAYMENT_PROCESSING_PRIVATE_KEY: ((APPLE_PAY_PAYMENT_PROCESSING_PRIVATE_KEY))
      APPLE_PAY_PAYMENT_PROCESSING_CERTIFICATE: ((APPLE_PAY_PAYMENT_PROCESSING_CERTIFICATE))
      GDS_CONNECTOR_SMARTPAY_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/smartpay
      GDS_CONNECTOR_SMARTPAY_TEST_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/smartpay
      GDS_CONNECTOR_SMARTPAY_LIVE_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/smartpay
      GDS_CONNECTOR_EPDQ_TEST_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/epdq
      GDS_CONNECTOR_EPDQ_LIVE_URL: https://pay-stubs-((space)).london.cloudapps.digital/stub/epdq
      GDS_CONNECTOR_SMARTPAY_NOTIFICATION_USER: smartpay-user
      GDS_CONNECTOR_SMARTPAY_NOTIFICATION_PASSWORD: smartpay-password
      STRIPE_TRANSACTION_FEE_PERCENTAGE: '0.1'
      JPA_LOG_LEVEL: 'INFO'
      JPA_SQL_LOG_LEVEL: 'INFO'
      HTTP_PROXY_SCHEME: http
      AUTH_READ_TIMEOUT_SECONDS: '1'
      NOTIFY_EMAIL_ENABLED: 'true'
      NOTIFY_PAYMENT_RECEIPT_EMAIL_TEMPLATE_ID: email-template-id
      NOTIFY_REFUND_ISSUED_EMAIL_TEMPLATE_ID: email-refund-issued-template-id
      NOTIFY_API_KEY: api_key-pay-notify-service-id-pay-notify-secret-needs-to-be-32-chars-fsghdngfhmhfkrgsfs
      NOTIFY_BASE_URL: https://pay-stubs-((space)).london.cloudapps.digital/notify
      CAPTURE_PROCESS_SCHEDULER_INITIAL_DELAY_SECONDS: '0'
      CAPTURE_PROCESS_SCHEDULER_RANDOM_INTERVAL_MINIMUM_SECONDS: '1'
      CAPTURE_PROCESS_SCHEDULER_RANDOM_INTERVAL_MAXIMUM_SECONDS: '1'
      XRAY_ENABLED: false
      CAPTURE_USING_SQS_FEATURE_FLAG: 'true'
      AWS_SQS_REGION: region-1
      AWS_SQS_CAPTURE_QUEUE_URL: http://sqs-((space)).apps.internal:9324/queue/pay_capture_queue
      AWS_SECRET_KEY: x
      AWS_ACCESS_KEY: x
      AWS_SQS_NON_STANDARD_SERVICE_ENDPOINT: 'true'
      AWS_SQS_ENDPOINT: http://sqs-((space)).apps.internal:9324
      AWS_SQS_MESSAGE_MAXIMUM_WAIT_TIME_IN_SECONDS: '20'
      EVENT_QUEUE_ENABLED: 'true'
      AWS_SQS_PAYMENT_EVENT_QUEUE_URL: http://sqs-((space)).apps.internal:9324/queue/pay_event_queue
      RUN_MIGRATION: 'true'
    routes:
      - route: card-connector-((space)).london.cloudapps.digital
